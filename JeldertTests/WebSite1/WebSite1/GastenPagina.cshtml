@using WebMatrix.Data

@{
    // hier geef je aan dat je de layout wilt gebruiken
    Layout = "~/_SiteLayout.cshtml";

    // hier open je de database
    string connectionString = @"Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\BridesDatabase.mdf;Integrated Security=True";
    string provider = "System.Data.SqlClient";
    Database db = Database.OpenConnectionString(connectionString, provider);

    // hier maak je 2 variabelen aan, de 1e selecteerd alles van de table Cadeaus
    var selectCommand = "SELECT * FROM Cadeaus";
    var searchTerm = "";

    // Hier zoek je alles op wat bij de code hoort die je bij Gast Login hebt gebruikt
    selectCommand = "SELECT * FROM Cadeaus WHERE userID = @0";
    searchTerm = "%" + Request["searchCadeau"] + "%";

    // je maakt de variabele selectedData, en je zoekt de cadeaus die bij de code horen die je bij Gast Login hebt gebruikt
    var selectedData = db.Query(selectCommand, Session["userID"]);
    var grid = new WebGrid(source: selectedData, defaultSort: "Rang", rowsPerPage: 10);
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Cadeaus</title>
    <style type="text/css">
        .grid {
            margin: 4px;
            border-collapse: collapse;
            width: 600px;
        }

            .grid th, .grid td {
                border: 1px solid #C0C0C0;
                padding: 5px;
            }

        .head {
            background-color: #E8E8E8;
            font-weight: bold;
            color: #FFF;
        }

        .alt {
            background-color: #E8E8E8;
            color: #000;
        }
    </style>
</head>
<body>
    <h1>Cadeaus</h1>
    <form method="get">
        <div>
            <label for="SearchTitle">Cadeaunaam bevat het volgende:</label>
            <input type="text" name="searchCadeau" value="@Request.QueryString["searchCadeau"]" />
            <button class="btn btn-primary" type="submit" />Zoek Cadeau
        </div>

    </form>

    <div>
        @grid.GetHtml(
          tableStyle: "grid",
          headerStyle: "head",
          alternatingRowStyle: "alt",
          columns: grid.Columns(
          grid.Column(format: @<a href="~/cshtml/KoopGift?id=@item.ID">Koop</a>),
grid.Column("Cadeaunaam"),
grid.Column("Gekocht"),
grid.Column("Rang")
)
)

    </div>
</body>
</html>