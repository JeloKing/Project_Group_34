@using WebMatrix.Data
@{
    // hier geef je aan dat je de layout wilt gebruiken
    Layout = "~/_SiteLayout.cshtml";

    // hier maak je 4 variabelen aan
    var Cadeaunaam = "";
    var Gekocht = "";
    int Rang = 0;
    var CadeauId = "";

    if (!IsPost)
    {
        if (!Request.QueryString["ID"].IsEmpty() && Request.QueryString["ID"].IsInt())
        {
            CadeauId = Request.QueryString["ID"];

            // hier opent hij de database
            string connectionString = @"Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\BridesDatabase.mdf;Integrated Security=True";
            string provider = "System.Data.SqlClient";
            Database db = Database.OpenConnectionString(connectionString, provider);

            // hier selecteert hij het cadeau door midden van het id
            var dbCommand = "SELECT * FROM Cadeaus WHERE ID = @0";
            var row = db.QuerySingle(dbCommand, CadeauId);

            if (row != null)
            {
                // als de tabel niet leeg is laat hij data zien
                Cadeaunaam = row.Cadeaunaam;
                Gekocht = row.Gekocht;
                Rang = row.Rang;
            }
            else
            {
                // Hier geeft hij een error als hij het id niet kan vinden van het cadeau
                Validation.AddFormError("Er was geen cadeau gevonden.");
            }
        }
        else
        {
            // Hier geeft hij een error als hij de database niet kan openen
            Validation.AddFormError("Er was geen cadeau gevonden.");
        }
    }

    if (IsPost)
    {
        // hier zijn de validatie berichten voor als het niet goed gaat
        Validation.RequireField("Cadeaunaam", "er is geen naam meegegeven");
        Validation.RequireField("Gekocht", "er is niet meegegeven of het cadeau gekocht is");
        Validation.RequireField("Rang", "er is geen rang meegegeven");
        Validation.RequireField("CadeauId", "er is geen Id meegegeven");

        Cadeaunaam = Request.Form["Cadeaunaam"];
        Gekocht = Request.Form["Gekocht"];
        Rang = Convert.ToInt32(Request.Form["Rang"]);
        CadeauId = Request.Form["CadeauId"];

        if (Validation.IsValid())
        {
            // hier opent hij de database
            string connectionString = @"Data Source=(LocalDB)\MSSQLLocalDB;AttachDbFilename=|DataDirectory|\BridesDatabase.mdf;Integrated Security=True";
            string provider = "System.Data.SqlClient";
            Database db = Database.OpenConnectionString(connectionString, provider);

            // hier update hij de database als de lijst aan alles voldoet
            var updateCommand = "UPDATE Cadeaus SET Cadeaunaam=@0, Gekocht=@1, Rang=@2 WHERE Id=@3";
            db.Execute(updateCommand, Cadeaunaam, Gekocht, Rang, CadeauId);
            Response.Redirect("~/cshtml/BruidCadeau");
        }
    }
}

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Pas een cadeau aan</title>
    <style>
        .validation-summary-errors {
            border: 2px dashed red;
            color: red;
            font-weight: bold;
            margin: 12px;
        }
    </style>
</head>
<body>
    @Html.ValidationSummary()
    <form method="post">
        <fieldset>
            <legend>Cadeau Informatie</legend>
            <table>
                <tr>
                    <td><label for="Cadeaunaam">Cadeau naam:</label></td>
                    <td><input type="text" name="Cadeaunaam" value="@Cadeaunaam" /></td>
                </tr>
                <tr>
                    <td><label for="Gekocht">Gekocht:</label></td>
                    <td><input type="text" name="Gekocht" value="@Gekocht" /></td>
                </tr>
                <tr>
                    <td><label for="Rang">Rang:</label></td>
                    <td><input type="number" name="Rang" value="@Rang" /></td>
                </tr>
            </table>
            <input type="hidden" name="cadeauid" value="@CadeauId" />
            <table>
                <tr>
                    <td><button class="btn btn-primary" type="submit" />Wijzig cadeau toe</td>
                    <td><button class="btn btn-primary" type="button" onclick="window.location.href='/cshtml/BruidCadeau.cshtml'" />Ga terug</td>
                </tr>
            </table>
        </fieldset>
    </form>
</body>
</html>